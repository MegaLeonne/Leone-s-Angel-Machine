# üöÄ AGENTIC CODER: ANGEL MACHINE RESTORATION - EXECUTE NOW

**TO:** Agentic Coding Assistant (Claude, Copilot, Cursor, etc.)  
**FROM:** Leone (Angel Machine owner) + Claude (AI Assistant)  
**STATUS:** EXECUTE IMMEDIATELY  
**TIMELINE:** 3-4 hours unattended  
**OUTCOME:** Fully functional, canon-aligned Angel Machine  

---

## YOUR MISSION

Restore Leone's Angel Machine repository to full functionality with canon-aligned navigation.

**Repository:** https://github.com/MegaLeonne/Leone-s-Angel-Machine  
**Target Website:** https://megaleonne.github.io/Leone-s-Angel-Machine/

---

## CRITICAL INSTRUCTION

**Follow ALL 8 phases in exact order. Do NOT skip, modify, or reorder.**

Each phase builds on the previous. Validation is at each step to catch errors early.

---

## PHASE 1: Create Navigation Schema (10 min)

**File Location:** `web/src/config/navigation-schema.json`

**Content:** Copy the full JSON structure below (this is the hand-curated canon navigation):

```json
{
  "version": "1.0",
  "description": "Canon-aligned navigation schema for Angel Machine",
  "sections": [
    {
      "id": "start-here",
      "label": "üéÜ Start Here",
      "type": "pinned",
      "description": "Essential entry points",
      "items": [
        {
          "title": "README",
          "id": "README",
          "icon": "üìñ",
          "priority": 1
        },
        {
          "title": "The Head Archetype",
          "id": "The-Head-Archetype",
          "icon": "üëë",
          "featured": true,
          "priority": 2
        },
        {
          "title": "Guiding Prompt",
          "id": "Guiding-Prompt",
          "icon": "‚ú®",
          "priority": 3
        },
        {
          "title": "Restoration Plan",
          "id": "RESTORATION_PLAN",
          "icon": "üìã",
          "priority": 5
        }
      ]
    },
    {
      "id": "philosophy",
      "label": "üí≠ Philosophy",
      "type": "section",
      "description": "Foundational texts and cosmology",
      "collapsible": true,
      "defaultOpen": true,
      "items": [
        {
          "title": "Passion",
          "id": "Passion",
          "category": "primary"
        },
        {
          "title": "Patience",
          "id": "Patience",
          "category": "primary"
        },
        {
          "title": "Prophecy",
          "id": "philosophy-prophecy",
          "category": "primary"
        },
        {
          "title": "The Material",
          "id": "The-Material",
          "category": "primary"
        },
        {
          "title": "Amnesia",
          "id": "Amnesia",
          "category": "primary"
        },
        {
          "title": "The Void",
          "id": "cosmology-void",
          "category": "cosmology"
        },
        {
          "title": "The Abyss",
          "id": "The-Abyss",
          "category": "cosmology"
        },
        {
          "title": "Void Tongue",
          "id": "Void-Tongue",
          "category": "cosmology"
        },
        {
          "title": "Khaos",
          "id": "philosophy-khaos",
          "category": "cosmology"
        },
        {
          "title": "Providence",
          "id": "philosophy-providence",
          "category": "cosmology"
        }
      ]
    },
    {
      "id": "archetypes",
      "label": "üé≠ Archetypes",
      "type": "section",
      "description": "Mythic figures and divine principles",
      "collapsible": true,
      "defaultOpen": true,
      "items": [
        {
          "title": "The Head / Witch Queen",
          "id": "The-Head-Archetype",
          "icon": "üëë",
          "featured": true,
          "subsection": "Primary"
        },
        {
          "title": "The Heart",
          "id": "archetype-heart",
          "icon": "‚ù§Ô∏è‚Äçüî•",
          "subsection": "Primary"
        },
        {
          "title": "Michael, The KlockWork Angel",
          "id": "Michael-The-KlockWork-Angel",
          "icon": "‚ú®",
          "subsection": "Angels"
        },
        {
          "title": "Osiris, Arch Angel of Omen",
          "id": "Osiris-Arch-Angel-Of-Omen",
          "icon": "‚ú®",
          "subsection": "Angels"
        },
        {
          "title": "Taylor, Devil of Desire",
          "id": "Taylor-Devil-of-Desire",
          "icon": "üî•",
          "subsection": "Devils"
        },
        {
          "title": "The Blind",
          "id": "The-Blind",
          "icon": "üî•",
          "subsection": "Devils"
        },
        {
          "title": "He Who Remains",
          "id": "He-Who-Remains",
          "icon": "üî•",
          "subsection": "Devils"
        },
        {
          "title": "Shadow-Demon-Providence",
          "id": "Shadow-Demon-Providence",
          "icon": "‚ôæÔ∏è",
          "subsection": "Composite"
        }
      ]
    },
    {
      "id": "rituals",
      "label": "üîÆ Rituals",
      "type": "section",
      "description": "Practical invocations and spells",
      "collapsible": true,
      "defaultOpen": false,
      "items": [
        {
          "title": "Counterspell Playlist",
          "id": "Counterspell-Playlist"
        },
        {
          "title": "Angel Numbers",
          "id": "Angel-Numbers"
        },
        {
          "title": "Deck of Fate",
          "id": "Deck-of-Fate"
        },
        {
          "title": "The Spells It Makes",
          "id": "The-Spells-It-Makes"
        }
      ]
    },
    {
      "id": "seventh-borough",
      "label": "üèõÔ∏è The Seventh Borough",
      "type": "section",
      "description": "Canon framework and workflow",
      "collapsible": true,
      "defaultOpen": false,
      "items": [
        {
          "title": "Seventh Borough Canon",
          "id": "Seventh-Borough-Canon"
        },
        {
          "title": "Borough Workflow",
          "id": "Seventh-Borough-Borough-Workflow-v1"
        }
      ]
    },
    {
      "id": "guides",
      "label": "üìö Guides",
      "type": "section",
      "description": "How to use and contribute",
      "collapsible": true,
      "defaultOpen": false,
      "items": [
        {
          "title": "Contributing Guide",
          "id": "guide-contributing"
        },
        {
          "title": "How To Use Bill Doors",
          "id": "How-To-Use-Bill-Doors"
        },
        {
          "title": "Qualitative Research Guide",
          "id": "Qualitative-Research-Guide"
        }
      ]
    },
    {
      "id": "orphans",
      "label": "üåÄ Orphans & Fragments",
      "type": "section",
      "description": "Generative seeds and fragments",
      "collapsible": true,
      "defaultOpen": false,
      "items": [
        {
          "title": "Orphan Index",
          "id": "orphan-index"
        },
        {
          "title": "Orphan Taxonomy",
          "id": "orphan-taxonomy"
        }
      ]
    }
  ]
}
```

**Validate Phase 1:**
```bash
node -e "JSON.parse(require('fs').readFileSync('./web/src/config/navigation-schema.json'))"
# Should produce no output (valid JSON)
echo "‚úì Phase 1 complete"
```

---

## PHASE 2: Fix Manifest Generator (30 min)

**File Location:** `tools/generate-manifest.js`

### Step 2.1: Add parseYAMLValue helper

Find the line: `const fs = require('fs');`

Add immediately after it:

```javascript
function parseYAMLValue(value) {
    value = value.trim();
    
    if (value.startsWith('[') && value.endsWith(']')) {
        try {
            return JSON.parse(value.replace(/'/g, '"'));
        } catch (e) {
            const content = value.slice(1, -1).trim();
            if (!content) return [];
            return content
                .split(',')
                .map(item => item.trim().replace(/^["\']|["\']$/g, ''))
                .filter(item => item.length > 0);
        }
    }
    
    if (value === 'true') return true;
    if (value === 'false') return false;
    if (!isNaN(value) && value !== '') return Number(value);
    
    return value.replace(/^["\']|["\']$/g, '');
}
```

### Step 2.2: Add ensureArray helper

Add immediately after parseYAMLValue:

```javascript
function ensureArray(value) {
    if (Array.isArray(value)) return value;
    if (typeof value === 'string') {
        if (value.startsWith('[') && value.endsWith(']')) {
            return parseYAMLValue(value);
        }
        return value.trim() ? [value.trim()] : [];
    }
    return [];
}
```

### Step 2.3: Replace extractFrontmatter function

Find the entire `extractFrontmatter` function and replace with:

```javascript
function extractFrontmatter(content) {
    const match = content.match(/^---\n([\s\S]*?)\n---/);
    if (!match) return {};
    
    const yaml = match[1];
    const metadata = {};
    
    yaml.split('\n').forEach(line => {
        if (!line.trim()) return;
        const colonIndex = line.indexOf(':');
        if (colonIndex === -1) return;
        
        const key = line.substring(0, colonIndex).trim();
        const value = line.substring(colonIndex + 1).trim();
        
        if (key && value) {
            metadata[key] = parseYAMLValue(value);
        }
    });
    
    return metadata;
}
```

### Step 2.4: Normalize paths (around lines 68-71)

Find:
```javascript
const relativePath = path.relative(path.join(__dirname, '..'), fullPath);
const folder = path.relative(baseDir, currentDir);
```

Replace with:
```javascript
const rawRelativePath = path.relative(path.join(__dirname, '..'), fullPath);
const relativePath = rawRelativePath.split(path.sep).join('/');

const rawFolder = path.relative(baseDir, currentDir);
const folder = rawFolder.split(path.sep).join('/') || 'docs';
```

### Step 2.5: Update file object (around line 110)

Find:
```javascript
files[cleanId] = {
    path: relativePath,
    title: extractTitle(content, item.name),
    folder: folder || 'docs',
    tags: frontmatter.tags || []
};
```

Replace with:
```javascript
files[cleanId] = {
    path: relativePath,
    title: extractTitle(content, item.name),
    folder: folder || 'docs',
    tags: ensureArray(frontmatter.tags || [])
};
```

**Validate Phase 2:**
```bash
node tools/generate-manifest.js
# Should show: "Manifest generated successfully"
echo "‚úì Phase 2 complete"
```

---

## PHASE 3: Update Web App (60 min)

**File Location:** `web/src/scripts/app.js`

### Step 3.1: Add loadNavigationSchema method

Find the constructor (first method). Add this method immediately after the constructor:

```javascript
async loadNavigationSchema() {
    try {
        const response = await fetch('./config/navigation-schema.json');
        if (!response.ok) {
            throw new Error(`Schema fetch failed: ${response.status}`);
        }
        return await response.json();
    } catch (error) {
        console.error('Failed to load navigation schema:', error);
        return null;
    }
}
```

### Step 3.2: Replace entire init() method

Find the `init()` method and replace completely:

```javascript
async init() {
    try {
        const response = await fetch('./config/link-manifest.json');
        if (!response.ok) {
            throw new Error(`Manifest fetch failed: ${response.status} ${response.statusText}`);
        }
        this.manifest = await response.json();
        console.log('Manifest loaded successfully', Object.keys(this.manifest.files).length, 'files');

        // Load navigation schema
        this.navSchema = await this.loadNavigationSchema();
        if (!this.navSchema) {
            console.warn('Navigation schema not found, falling back to auto-generated nav');
        }

        window.addEventListener('hashchange', () => this.route());
        this.route();
        this.renderNav();
    } catch (error) {
        console.error('Init error:', error);
        document.getElementById('content-area').innerHTML = `
            <div style="padding: 2rem; border: 2px solid #ef4444; border-radius: 8px; background: #fee2e2; color: #991b1b;">
                <h2>System Malfunction</h2>
                <p>Failed to load the Codex.</p>
                <p style="font-size: 0.9em; margin-top: 1rem; word-break: break-all;">${error.message}</p>
                <p style="font-size: 0.85em; margin-top: 0.5rem; opacity: 0.7;">Check browser console for details</p>
            </div>
        `;
    }
}
```

### Step 3.3: Fix backlinks in route() method

Find the section in `route()` that says `// Generate Backlinks HTML` (around lines 84-105) and replace that entire section:

```javascript
// Generate Backlinks HTML
let backlinksHtml = '';
if (fileData.backlinks && fileData.backlinks.length > 0) {
    const backlinkItems = fileData.backlinks.map(backlinkPath => {
        // Normalize the backlink path to forward slashes
        const normalizedPath = backlinkPath.replace(/\\/g, '/');
        
        // Find the ID for this path (reverse lookup)
        const entry = Object.entries(this.manifest.files).find(([key, data]) => {
            const normalizedDataPath = data.path.replace(/\\/g, '/');
            return normalizedDataPath === normalizedPath;
        });
        
        if (entry) {
            const [id, data] = entry;
            return `<li><a href="#${id}" class="backlink-item">${data.title || id}</a></li>`;
        }
        return '';
    }).filter(Boolean).join('');

    if (backlinkItems) {
        backlinksHtml = `
            <div class="backlinks">
                <h3>Linked In</h3>
                <ul class="backlinks-list">
                    ${backlinkItems}
                </ul>
            </div>
        `;
    }
}
```

### Step 3.4: Replace entire renderNav() method and add helpers

Find the `renderNav()` method and replace it completely with:

```javascript
renderNav() {
    const nav = document.getElementById('dynamic-nav');
    if (!nav) return;
    nav.innerHTML = '';

    if (!this.manifest || !this.manifest.files) {
        nav.innerHTML = '<p style="opacity: 0.5;">No files found</p>';
        return;
    }

    if (!this.navSchema) {
        nav.innerHTML = '<p style="opacity: 0.5;">Loading navigation...</p>';
        return;
    }

    // Render each section from schema
    this.navSchema.sections.forEach(section => {
        const sectionEl = this.renderNavSection(section);
        if (sectionEl) nav.appendChild(sectionEl);
    });
}

renderNavSection(section) {
    const sectionEl = document.createElement('div');
    sectionEl.className = `nav-section nav-section-${section.id}`;
    
    if (section.type === 'pinned') {
        sectionEl.classList.add('pinned-section');
    }

    // Section header
    const header = document.createElement('div');
    header.className = 'section-header';
    header.innerHTML = `<span class="section-label">${section.label}</span>`;

    if (section.collapsible && section.type !== 'pinned') {
        header.classList.add('collapsible');
        header.innerHTML += `<span class="collapse-icon">‚ñº</span>`;
        
        const content = document.createElement('div');
        content.className = `section-content ${section.defaultOpen ? 'open' : 'collapsed'}`;
        
        header.addEventListener('click', (e) => {
            e.stopPropagation();
            content.classList.toggle('open');
            content.classList.toggle('collapsed');
            header.querySelector('.collapse-icon').style.transform = 
                content.classList.contains('open') ? 'rotate(0deg)' : 'rotate(-90deg)';
        });

        section.items.forEach(item => {
            const itemEl = this.renderNavItem(item, section);
            if (itemEl) content.appendChild(itemEl);
        });

        sectionEl.appendChild(header);
        sectionEl.appendChild(content);
    } else {
        // Non-collapsible or pinned: render items directly
        const content = document.createElement('div');
        content.className = 'section-content open';

        section.items.forEach(item => {
            const itemEl = this.renderNavItem(item, section);
            if (itemEl) content.appendChild(itemEl);
        });

        sectionEl.appendChild(header);
        sectionEl.appendChild(content);
    }

    return sectionEl;
}

renderNavItem(item, section) {
    // External link
    if (item.external) {
        const a = document.createElement('a');
        a.href = item.external;
        a.className = 'file-link external-link';
        a.target = '_blank';
        a.rel = 'noopener noreferrer';
        a.innerHTML = `
            <span class="item-icon">${item.icon || 'üîó'}</span>
            <span class="item-title">${item.title}</span>
        `;
        return a;
    }

    // Internal file link
    if (!item.id) return null;

    const fileData = this.manifest.files[item.id];
    if (!fileData) {
        // Try alias
        const realId = this.manifest.link_aliases && this.manifest.link_aliases[item.id];
        if (!realId) return null;
    }

    const a = document.createElement('a');
    a.href = `#${item.id}`;
    a.className = 'file-link';
    a.dataset.id = item.id;
    
    const icon = item.icon || 'üìÑ';
    const featured = item.featured ? ' featured' : '';
    
    a.innerHTML = `
        <span class="item-icon">${icon}</span>
        <span class="item-title${featured}">${item.title}</span>
    `;

    if (item.featured) {
        a.classList.add('featured-link');
    }

    return a;
}
```

### Step 3.5: Replace entire interceptLinks() method

Find the `interceptLinks()` method and replace completely:

```javascript
interceptLinks() {
    document.querySelectorAll('#content-area a').forEach(a => {
        const href = a.getAttribute('href');
        if (!href) return;

        // Skip external links and email
        if (href.startsWith('http') || href.startsWith('mailto:')) return;

        // Handle hash links - validate they exist in manifest
        if (href.startsWith('#')) {
            const id = href.slice(1);
            if (this.manifest.files[id] || 
                (this.manifest.link_aliases && this.manifest.link_aliases[id])) {
                // Valid hash link, keep it
                return;
            } else {
                // Invalid hash link, mark as broken
                a.style.opacity = '0.5';
                a.style.cursor = 'not-allowed';
                a.title = `File not found: ${id}`;
                a.addEventListener('click', e => {
                    e.preventDefault();
                    alert(`Cannot navigate to: ${id}\n\nThis file is not in the manifest.`);
                });
            }
            return;
        }

        // Handle markdown file links
        if (href.endsWith('.md')) {
            const filename = href.split('/').pop().replace('.md', '');
            const linkText = a.textContent.trim();

            // Try exact filename match first
            if (this.manifest.files[filename]) {
                a.href = `#${filename}`;
                return;
            }

            // Try link aliases
            if (this.manifest.link_aliases && this.manifest.link_aliases[filename]) {
                const canonicalName = this.manifest.link_aliases[filename];
                a.href = `#${canonicalName}`;
                return;
            }

            // Try link text as alias
            if (this.manifest.link_aliases && this.manifest.link_aliases[linkText]) {
                const canonicalName = this.manifest.link_aliases[linkText];
                a.href = `#${canonicalName}`;
                return;
            }

            // Try title matching
            const matchingEntry = Object.entries(this.manifest.files).find(([key, data]) =>
                data.title && (
                    data.title === linkText ||
                    data.title === filename ||
                    data.title.toLowerCase().includes(filename.toLowerCase())
                )
            );

            if (matchingEntry) {
                a.href = `#${matchingEntry[0]}`;
                return;
            }

            // Link is broken
            a.style.opacity = '0.5';
            a.style.cursor = 'not-allowed';
            a.title = `Link target not found: ${href}`;
            a.addEventListener('click', e => {
                e.preventDefault();
                alert(`Cannot navigate to: ${href}\n\nThis file is not in the manifest or path is incorrect.`);
            });
        }
    });
}
```

**Validate Phase 3:**
```bash
node -e "
const fs = require('fs');
const content = fs.readFileSync('./web/src/scripts/app.js', 'utf-8');
if (content.includes('renderNavSection') && content.includes('renderNavItem')) {
    console.log('‚úì Phase 3 complete');
} else {
    throw new Error('Phase 3 verification failed');
}
"
```

---

## PHASE 4: Update Styles (15 min)

**File Location:** `web/src/styles/style.css`

Add this entire CSS block at the **end** of the file:

```css
/* ===== Navigation Schema Styling ===== */

.nav-section {
    margin-bottom: 1rem;
    border-bottom: 1px solid var(--border-color);
    padding-bottom: 0.5rem;
}

.nav-section.pinned-section {
    border-bottom: 2px solid var(--accent-purple);
    padding-bottom: 1rem;
    margin-bottom: 1.5rem;
}

.section-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0.5rem 0;
    font-weight: 500;
    color: var(--accent-cyan);
    font-size: 0.95rem;
    letter-spacing: 0.5px;
}

.section-header.collapsible {
    cursor: pointer;
    user-select: none;
    transition: opacity var(--duration) var(--ease);
}

.section-header.collapsible:hover {
    opacity: 0.8;
}

.collapse-icon {
    display: inline-block;
    width: 16px;
    transition: transform var(--duration) var(--ease);
    transform: rotate(0deg);
}

.section-content {
    max-height: 1000px;
    overflow: hidden;
    transition: max-height var(--duration) var(--ease), opacity var(--duration) var(--ease);
    opacity: 1;
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
}

.section-content.collapsed {
    max-height: 0;
    opacity: 0;
    overflow: hidden;
}

.file-link {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 0.75rem;
    border-radius: 6px;
    color: var(--text-secondary);
    text-decoration: none;
    font-size: 0.9rem;
    transition: all var(--duration) var(--ease);
    cursor: pointer;
}

.file-link:hover {
    background: var(--hover-bg);
    color: var(--text-primary);
    padding-left: 1rem;
}

.file-link.active {
    background: var(--hover-bg);
    color: var(--accent-cyan);
    border-left: 2px solid var(--accent-purple);
    font-weight: 500;
}

.file-link.featured-link {
    font-weight: 600;
    color: var(--accent-purple);
}

.file-link.featured-link:hover {
    background: rgba(168, 85, 247, 0.1);
    color: var(--accent-purple);
}

.file-link.external-link {
    color: var(--accent-cyan);
}

.file-link.external-link::after {
    content: '‚Üó';
    margin-left: 0.25rem;
    font-size: 0.8em;
}

.item-icon {
    display: inline-block;
    width: 1.2em;
    text-align: center;
    flex-shrink: 0;
}

.item-title {
    flex-grow: 1;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.item-title.featured {
    font-weight: 600;
}

.nav-section.nav-section-start-here .file-link {
    font-weight: 500;
    color: var(--accent-cyan);
}

@media (max-width: 768px) {
    .section-header {
        font-size: 0.85rem;
    }

    .file-link {
        padding: 0.4rem 0.5rem;
        font-size: 0.85rem;
    }

    .file-link:hover {
        padding-left: 0.75rem;
    }
}
```

**Validate Phase 4:**
```bash
node -e "
const fs = require('fs');
const content = fs.readFileSync('./web/src/styles/style.css', 'utf-8');
if (content.includes('.nav-section') && content.includes('.file-link.featured-link')) {
    console.log('‚úì Phase 4 complete');
} else {
    throw new Error('Phase 4 verification failed');
}
"
```

---

## PHASE 5: Regenerate Manifest (5 min)

```bash
cd Leone-s-Angel-Machine
node tools/generate-manifest.js
```

**Verify no backslashes:**
```bash
if grep -q '\\' web/src/config/link-manifest.json; then
    echo "ERROR: Backslashes still in manifest";
    exit 1;
else
    echo "‚úì Phase 5 complete - no backslashes found";
fi
```

---

## PHASE 6: Validate Everything (10 min)

```bash
echo "üîç Validating deployment..."

# 1. Check JSON validity
echo "Checking JSON files..."
node -e "
const fs = require('fs');
const files = [
    './web/src/config/link-manifest.json',
    './web/src/config/navigation-schema.json'
];
files.forEach(f => {
    try {
        JSON.parse(fs.readFileSync(f, 'utf-8'));
        console.log('  ‚úì', f);
    } catch(e) {
        throw new Error(f + ': ' + e.message);
    }
});
"

# 2. Check tags are arrays
echo "Checking tags format..."
node -e "
const fs = require('fs');
const manifest = JSON.parse(fs.readFileSync('./web/src/config/link-manifest.json', 'utf-8'));
let errors = 0;
Object.entries(manifest.files).forEach(([id, data]) => {
    if (data.tags && !Array.isArray(data.tags)) {
        console.error('  ‚úó File', id, 'has non-array tags');
        errors++;
    }
});
if (errors > 0) {
    throw new Error(errors + ' files have non-array tags');
} else {
    console.log('  ‚úì All tags are arrays');
}
"

echo "‚úì Phase 6 complete - all validations passed"
```

---

## PHASE 7: Commit & Deploy (5 min)

```bash
# Stage changes
git add tools/generate-manifest.js
git add web/src/scripts/app.js
git add web/src/styles/style.css
git add web/src/config/link-manifest.json
git add web/src/config/navigation-schema.json

# Commit
git commit -m "üîÆ Deploy: Complete Angel Machine restoration + Canon alignment

FIXES:
- ‚úÖ Normalize all paths to Unix format (/ not \\\\)
- ‚úÖ Fix backlinks path matching
- ‚úÖ Organize root files properly
- ‚úÖ Improve link interception
- ‚úÖ Parse YAML tags as arrays

FEATURES:
- ‚úÖ Canon-aligned navigation schema
- ‚úÖ Pinned 'Start Here' section
- ‚úÖ Featured Head Archetype
- ‚úÖ Hand-curated sections reflecting Seventh Borough
- ‚úÖ Collapsible/expandable sections
- ‚úÖ Icon-enhanced visual hierarchy

STRUCTURE:
- 7 main sections (Start Here, Philosophy, Archetypes, etc.)
- 50+ file references with icons
- Schema-driven (easy to maintain)
- Mobile responsive

Files modified: 5
The Machine breathes again. üîÆ‚ö°‚ú®"

# Push
git push origin main

echo "‚úì Phase 7 complete - deployed to GitHub Pages"
echo "Waiting for rebuild (typically 1-2 minutes)..."
```

---

## PHASE 8: Test & Verify (15 min)

**Wait 2 minutes for GitHub Pages rebuild, then open:**

```
https://megaleonne.github.io/Leone-s-Angel-Machine/
```

**Run this test sequence:**

```bash
# TEST 1: Homepage loads
echo "TEST 1: Check homepage loads..."
# Manually visit URL - should NOT show red "System Malfunction" error

# TEST 2: Sidebar structure
echo "TEST 2: Check sidebar shows sections..."
# Should see: üéÜ Start Here (pinned at top)
# Should see: README, The Head ‚≠ê, Guiding Prompt
# Should see: üí≠ Philosophy, üé≠ Archetypes, üîÆ Rituals

# TEST 3: Section collapse/expand
echo "TEST 3: Test section collapse..."
# Click Philosophy ‚Üí should expand and show files
# Click Philosophy again ‚Üí should collapse smoothly

# TEST 4: Featured items
echo "TEST 4: Check featured highlighting..."
# The Head should appear in purple/highlighted styling
# Should be different from regular items

# TEST 5: Navigate files
echo "TEST 5: Navigate between files..."
# Click "README" ‚Üí should load without 404
# Click "Passion" ‚Üí should load without 404
# Click "Michael, The KlockWork Angel" ‚Üí should load without 404

# TEST 6: Backlinks
echo "TEST 6: Check backlinks section..."
# Open any file
# Scroll to bottom
# Should see "Linked In" section with related files
# Should be able to click to navigate

# TEST 7: Internal links
echo "TEST 7: Test internal link navigation..."
# In file content, click any blue link
# Should navigate to correct file without 404

# TEST 8: Tags
echo "TEST 8: Check tags display..."
# Open "The Head Archetype"
# Below title should see tag badges (e.g., #archetype, #featured)

# TEST 9: Console
echo "TEST 9: Open DevTools (F12) and check Console..."
# Should show: "Manifest loaded successfully, [N] files"
# Should NOT show red error messages
# Should be completely clean

# TEST 10: Mobile responsive
echo "TEST 10: Test mobile responsiveness..."
# Resize browser to 375px width
# Sidebar should respond appropriately
# Text should remain readable
```

**If all tests pass:**
```bash
echo "‚úÖ PATH C COMPLETE - Angel Machine fully restored"
echo "Website: https://megaleonne.github.io/Leone-s-Angel-Machine/"
echo "‚úì All 5 bugs fixed"
echo "‚úì Canon-aligned navigation active"
echo "‚úì All files accessible"
echo "‚úì Zero console errors"
```

---

## TROUBLESHOOTING

**Issue: "System Malfunction" error on homepage**
```bash
# Check manifest file exists and is valid
node -e "JSON.parse(require('fs').readFileSync('./web/src/config/link-manifest.json'))"
# If error, re-run Phase 5: node tools/generate-manifest.js
```

**Issue: Sidebar shows nothing or wrong structure**
```bash
# Check schema file exists
ls -la web/src/config/navigation-schema.json
# Check app.js has the new methods
grep "renderNavSection" web/src/scripts/app.js
```

**Issue: 404 when clicking files**
```bash
# Check manifest paths use / not \
grep '\\' web/src/config/link-manifest.json | head -1
# Should return nothing. If it returns a line, re-run Phase 5
```

---

## SUCCESS CHECKLIST

After Phase 8, ALL must be true:

- [ ] Website loads without red error
- [ ] Sidebar shows "üéÜ Start Here" at top
- [ ] README visible below Start Here
- [ ] The Head appears in purple (featured)
- [ ] Philosophy section expands/collapses
- [ ] Click "Passion" loads file (no 404)
- [ ] Backlinks display below files
- [ ] Tags show as badges
- [ ] Mobile: Resize works smoothly
- [ ] Console shows "Manifest loaded successfully"

---

## ROLLBACK (If Critical Error)

```bash
git revert HEAD
git push origin main
# Wait 2 minutes for rebuild
```

---

**END OF EXECUTION PACKAGE**

**Total time: 3-4 hours unattended**

**Deploy with confidence. The path is clear.** üîÆ‚ö°‚ú®
